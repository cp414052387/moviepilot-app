# MoviePilot App é¡¹ç›®æ€»ç»“

## é¡¹ç›®ä½ç½®
`/tmp/moviepilot_app`

## é¡¹ç›®ç»“æ„

```
moviepilot_app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ moviepilot_api.dart      # API æœåŠ¡å±‚ï¼ŒåŒ…å«æ‰€æœ‰ MoviePilot API è°ƒç”¨
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ media.dart               # æ•°æ®æ¨¡å‹ï¼šMediaItem, Subscription, DownloadTask, SystemStatus
â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”œâ”€â”€ app_provider.dart        # åº”ç”¨çº§ providerï¼ˆç©ºæ–‡ä»¶ï¼‰
â”‚   â”‚   â””â”€â”€ settings_provider.dart   # è®¾ç½®çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ home_screen.dart         # ä¸»é¡µé¢ï¼Œåº•éƒ¨å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ setup_screen.dart        # åˆå§‹åŒ–è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ media_library_screen.dart # åª’ä½“åº“é¡µé¢
â”‚   â”‚   â”œâ”€â”€ subscriptions_screen.dart # è®¢é˜…ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ downloads_screen.dart    # ä¸‹è½½ä»»åŠ¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ history_screen.dart      # å†å²è®°å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ settings_screen.dart     # è®¾ç½®é¡µé¢
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â””â”€â”€ app_theme.dart           # ä¸»é¢˜é…ç½®ï¼ˆæµ…è‰²/æ·±è‰²ï¼‰
â”‚   â”œâ”€â”€ widgets/                     # è‡ªå®šä¹‰ç»„ä»¶ï¼ˆé¢„ç•™ç›®å½•ï¼‰
â”‚   â”œâ”€â”€ main.dart                    # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ lib.dart                     # å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ android/                         # Android é…ç½®
â”‚   â””â”€â”€ app/
â”‚       â””â”€â”€ src/main/
â”‚           â”œâ”€â”€ AndroidManifest.xml
â”‚           â””â”€â”€ res/values/styles.xml
â”œâ”€â”€ assets/                          # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ animations/
â”œâ”€â”€ pubspec.yaml                     # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ run.sh                           # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ .gitignore
â””â”€â”€ analysis_options.yaml
```

## ä¸»è¦åŠŸèƒ½

### 1. åˆå§‹åŒ–è®¾ç½® (SetupScreen)
- è¾“å…¥ MoviePilot API åœ°å€
- å¯é€‰è¾“å…¥ API Keyï¼ˆå¦‚æœéœ€è¦è®¤è¯ï¼‰
- æµ‹è¯•è¿æ¥åŠŸèƒ½

### 2. åª’ä½“åº“ (MediaLibraryScreen)
- ç½‘æ ¼å±•ç¤ºç”µå½±å’Œç”µè§†å‰§
- æ˜¾ç¤ºè¯„åˆ†ã€å¹´ä»½ã€ä¸‹è½½çŠ¶æ€
- ä¸‹æ‹‰åˆ·æ–°
- æœç´¢åŠŸèƒ½ï¼ˆé¢„ç•™ï¼‰
- ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

### 3. è®¢é˜…ç®¡ç† (SubscriptionsScreen)
- æµ®åŠ¨æŒ‰é’®æ·»åŠ æ–°è®¢é˜…
- æ”¯æŒç”µå½±å’Œå‰§é›†è®¢é˜…
- æ˜¾ç¤ºè®¢é˜…çŠ¶æ€ï¼ˆç­‰å¾…ä¸­ã€ä¸‹è½½ä¸­ã€å·²å®Œæˆã€å¤±è´¥ï¼‰
- åˆ é™¤è®¢é˜…åŠŸèƒ½

### 4. ä¸‹è½½ç®¡ç† (DownloadsScreen)
- æ˜¾ç¤ºæ‰€æœ‰ä¸‹è½½ä»»åŠ¡
- æ˜¾ç¤ºä¸‹è½½è¿›åº¦ã€é€Ÿåº¦ã€å¤§å°
- æš‚åœ/ç»§ç»­ä¸‹è½½
- åˆ é™¤ä¸‹è½½ä»»åŠ¡
- ä¸‹æ‹‰åˆ·æ–°

### 5. å†å²è®°å½• (HistoryScreen)
- æ˜¾ç¤ºæ“ä½œå†å²
- ä¸Šæ‹‰åŠ è½½æ›´å¤š
- æ˜¾ç¤ºæ“ä½œç±»å‹ï¼ˆä¸‹è½½ã€åˆ é™¤ã€è®¢é˜…ï¼‰
- æˆåŠŸ/å¤±è´¥çŠ¶æ€æ ‡è¯†

### 6. è®¾ç½® (SettingsScreen)
- API åœ°å€é…ç½®
- API Key é…ç½®
- ä¸»é¢˜æ¨¡å¼ï¼ˆæµ…è‰²/æ·±è‰²/è·Ÿéšç³»ç»Ÿï¼‰
- è‡ªåŠ¨åˆ·æ–°è®¾ç½®
- åˆ·æ–°é—´éš”é…ç½®ï¼ˆ10/30/60/120ç§’ï¼‰
- æ¨é€é€šçŸ¥å¼€å…³
- ç‰ˆæœ¬ä¿¡æ¯å’Œå¼€æºè®¸å¯

## æŠ€æœ¯äº®ç‚¹

### çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ `flutter_riverpod` è¿›è¡ŒçŠ¶æ€ç®¡ç†
- `settingsProvider` ç®¡ç†åº”ç”¨è®¾ç½®
- `apiProvider` æä¾› API å®ä¾‹

### ç½‘ç»œè¯·æ±‚
- ä½¿ç”¨ `dio` è¿›è¡Œ HTTP è¯·æ±‚
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- è¯·æ±‚/å“åº”æ‹¦æˆªå™¨ç”¨äºæ—¥å¿—

### UI è®¾è®¡
- Material Design 3 è®¾è®¡è§„èŒƒ
- è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²ï¼ˆMoviePilot é£æ ¼æ·±è“è‰²ï¼‰
- æ”¯æŒæµ…è‰²/æ·±è‰²æ¨¡å¼
- ä½¿ç”¨ `shimmer` å®ç°åŠ è½½æ•ˆæœ
- ä½¿ç”¨ `pull_to_refresh` å®ç°ä¸‹æ‹‰åˆ·æ–°
- ä½¿ç”¨ `cached_network_image` ç¼“å­˜å›¾ç‰‡

### æ•°æ®æŒä¹…åŒ–
- ä½¿ç”¨ `shared_preferences` ä¿å­˜è®¾ç½®
- ä½¿ç”¨ `flutter_secure_storage` å­˜å‚¨æ•æ„Ÿä¿¡æ¯

## ä¾èµ–åŒ…

```yaml
# çŠ¶æ€ç®¡ç†
- provider
- flutter_riverpod

# ç½‘ç»œè¯·æ±‚
- dio
- connectivity_plus

# å­˜å‚¨
- shared_preferences
- flutter_secure_storage

# UI ç»„ä»¶
- flutter_svg
- cached_network_image
- shimmer
- pull_to_refresh
- animations
- lottie

# å·¥å…·ç±»
- intl
- url_launcher
- path_provider
- permission_handler

# å›¾æ ‡
- material_design_icons_flutter
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… Flutter SDK
```bash
# macOS
brew install --cask flutter

# æˆ–è€…ä»å®˜ç½‘ä¸‹è½½
# https://flutter.dev/docs/get-started/install
```

### 2. éªŒè¯å®‰è£…
```bash
flutter doctor
```

### 3. è¿›å…¥é¡¹ç›®ç›®å½•
```bash
cd /tmp/moviepilot_app
```

### 4. å®‰è£…ä¾èµ–
```bash
flutter pub get
```

### 5. è¿è¡Œåº”ç”¨
```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬
./run.sh

# æˆ–ç›´æ¥è¿è¡Œ
flutter run

# åœ¨ Chrome ä¸­è¿è¡Œï¼ˆè°ƒè¯•ï¼‰
flutter run -d chrome
```

### 6. æ„å»ºåº”ç”¨
```bash
# æ„å»º APK
flutter build apk --release

# æ„å»º App Bundleï¼ˆç”¨äº Google Playï¼‰
flutter build appbundle --release
```

## é…ç½® MoviePilot

1. å¯åŠ¨åº”ç”¨åï¼Œä¼šè¿›å…¥è®¾ç½®é¡µé¢
2. è¾“å…¥ä½ çš„ MoviePilot æœåŠ¡å™¨åœ°å€ï¼Œå¦‚ï¼š
   - `http://192.168.1.100:3001`
   - `https://moviepilot.example.com`
3. å¦‚æœé…ç½®äº† API Keyï¼Œä¹Ÿä¸€å¹¶è¾“å…¥
4. ç‚¹å‡»"æµ‹è¯•è¿æ¥"éªŒè¯
5. ä¿å­˜åå³å¯ä½¿ç”¨

## API è¯´æ˜

åº”ç”¨é€šè¿‡ä»¥ä¸‹ API ä¸ MoviePilot æœåŠ¡ç«¯é€šä¿¡ï¼š

- `GET /api/system/status` - è·å–ç³»ç»ŸçŠ¶æ€
- `GET /api/media/libraries` - è·å–åª’ä½“åº“åˆ—è¡¨
- `GET /api/media/list` - è·å–åª’ä½“åˆ—è¡¨
- `GET /api/media/search` - æœç´¢åª’ä½“
- `GET /api/subscribe/list` - è·å–è®¢é˜…åˆ—è¡¨
- `POST /api/subscribe/add` - æ·»åŠ è®¢é˜…
- `DELETE /api/subscribe/{id}` - åˆ é™¤è®¢é˜…
- `GET /api/download/list` - è·å–ä¸‹è½½åˆ—è¡¨
- `POST /api/download/{id}/pause` - æš‚åœä¸‹è½½
- `POST /api/download/{id}/start` - å¼€å§‹ä¸‹è½½
- `DELETE /api/download/{id}` - åˆ é™¤ä¸‹è½½
- `GET /api/history/list` - è·å–å†å²è®°å½•

è¯¦ç»† API æ–‡æ¡£ï¼šhttps://api.movie-pilot.org

## ä¸‹ä¸€æ­¥å»ºè®®

### åŠŸèƒ½å¢å¼º
1. **æœç´¢åŠŸèƒ½** - å®ç°åª’ä½“æœç´¢
2. **åª’ä½“è¯¦æƒ…** - å®Œå–„åª’ä½“è¯¦æƒ…é¡µé¢ï¼ˆæ¼”å‘˜ã€å¯¼æ¼”ã€æ ‡ç­¾ç­‰ï¼‰
3. **æ’­æ”¾æ§åˆ¶** - é›†æˆæ’­æ”¾å™¨
4. **ç¦»çº¿ç¼“å­˜** - ç¼“å­˜åª’ä½“ä¿¡æ¯
5. **æ¨é€é€šçŸ¥** - å®ç°ä¸‹è½½å®Œæˆç­‰é€šçŸ¥
6. **å¤šè¯­è¨€** - æ”¯æŒå›½é™…åŒ–
7. **å¤šè´¦æˆ·** - æ”¯æŒå¤šä¸ª MoviePilot æœåŠ¡å™¨

### ä»£ç ä¼˜åŒ–
1. æ·»åŠ å•å…ƒæµ‹è¯•
2. æ·»åŠ é›†æˆæµ‹è¯•
3. æ€§èƒ½ä¼˜åŒ–ï¼ˆåˆ—è¡¨è™šæ‹ŸåŒ–ï¼‰
4. é”™è¯¯ç›‘æ§é›†æˆ
5. æ—¥å¿—ç³»ç»Ÿ

### UI ä¼˜åŒ–
1. æ·»åŠ æ›´å¤šåŠ¨ç”»æ•ˆæœ
2. è‡ªå®šä¹‰åŠ è½½åŠ¨ç”»
3. é€‚é…å¹³æ¿
4. æ·±è‰²æ¨¡å¼å›¾æ ‡é€‚é…

## æ³¨æ„äº‹é¡¹

1. **Flutter ç‰ˆæœ¬** - éœ€è¦ Flutter 3.0+ / Dart 3.0+
2. **Android SDK** - æœ€ä½ SDK 21ï¼ˆAndroid 5.0ï¼‰
3. **ç½‘ç»œæƒé™** - å·²åœ¨ AndroidManifest.xml ä¸­é…ç½®
4. **HTTP è¯·æ±‚** - å¦‚æœä½¿ç”¨ HTTPS è¯ä¹¦ä¸å—ä¿¡ä»»ï¼Œéœ€è¦é…ç½®ç½‘ç»œå®‰å…¨ç­–ç•¥
5. **å›¾ç‰‡åŠ è½½** - ä½¿ç”¨å ä½å›¾ï¼Œé¿å…åŠ è½½å¤±è´¥å½±å“ä½“éªŒ

## é¡¹ç›®å®Œæˆåº¦

âœ… é¡¹ç›®ç»“æ„å®Œæ•´
âœ… æ‰€æœ‰é¡µé¢å·²åˆ›å»º
âœ… API æœåŠ¡å±‚å·²å®Œæˆ
âœ… æ•°æ®æ¨¡å‹å·²å®šä¹‰
âœ… ä¸»é¢˜é…ç½®å·²å®Œæˆ
âœ… çŠ¶æ€ç®¡ç†å·²å®ç°
âœ… Android é…ç½®å·²å®Œæˆ
âœ… å¯åŠ¨è„šæœ¬å·²åˆ›å»º
âœ… æ–‡æ¡£å·²å®Œå–„

âš ï¸ éœ€è¦å®‰è£… Flutter SDK æ‰èƒ½è¿è¡Œ
âš ï¸ éœ€è¦é…ç½® MoviePilot æœåŠ¡å™¨
âš ï¸ éœ€è¦çœŸæœºæˆ–æ¨¡æ‹Ÿå™¨æ‰èƒ½è¿è¡Œ

---

**é¡¹ç›®å·²åˆ›å»ºå®Œæˆï¼** ğŸ‰
